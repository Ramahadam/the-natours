{"mappings":";;;;;;ACAA,kBAAkB;AAGX,eAAe,0CAAM,KAAK,EAAE,QAAQ;IACzC,QAAQ,GAAG,CAAC,OAAO;IACnB,IAAI;QACF,MAAM,MAAM,MAAM,CAAA,GAAA,sCAAI,EAAE;YACtB,QAAQ;YACR,KAAK;YACL,MAAM;uBACJ;0BACA;YACF;QACF;QACA,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,WACtB,OAAO,UAAU,CAAC;YAChB,SAAS,MAAM,CAAC;QAClB,GAAG;IAEP,EAAE,OAAO,KAAK;QACZ,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO;IACjC;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,MAAM,CAAA,GAAA,sCAAI,EAAE;YACtB,QAAQ;YACR,KAAK;QACP;QAEA,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,WACtB,SAAS,MAAM,CAAC;IAEpB,EAAE,OAAO,KAAK;QACZ,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO;IACjC;AACF;;ADrCA,kBAAkB;;;AEEX,eAAe,0CAAe,IAAI,EAAE,IAAI;IAC7C,MAAM,MACJ,SAAS,SACL,2BACA;IAEN,IAAI;QACF,MAAM,MAAM,MAAM,CAAA,GAAA,sCAAI,EAAE;iBACtB;YACA,QAAQ;YACR,MAAM;YACN,kBAAkB,CAAC,MAAM,UAAY;QACvC;QAEA,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,WACtB,yBAAyB;QACzB,QAAQ,GAAG,CAAC;IAEhB,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;IACd;AACF;;;AFhBA,MAAM,6BAAO,SAAS,aAAa,CAAC;AACpC,MAAM,2CAAqB,SAAS,aAAa,CAAC;AAClD,MAAM,yCAAmB,SAAS,aAAa,CAAC;AAChD,MAAM,kCAAY,SAAS,aAAa,CAAC;AAEzC,IAAI,4BACF,2BAAK,gBAAgB,CAAC,UAAU,CAAC;IAC/B,EAAE,cAAc;IAChB,MAAM,QAAQ,SAAS,cAAc,CAAC,SAAS,KAAK;IACpD,MAAM,WAAW,SAAS,cAAc,CAAC,YAAY,KAAK;IAC1D,CAAA,GAAA,yCAAI,EAAE,OAAO;AACf;AAGF,IAAI,0CACF,yCAAmB,gBAAgB,CAAC,UAAU,OAAO;IACnD,EAAE,cAAc;IAEhB,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,QAAQ,SAAS,cAAc,CAAC,QAAQ,KAAK;IAC7D,SAAS,MAAM,CAAC,SAAS,SAAS,cAAc,CAAC,SAAS,KAAK;IAC/D,MAAM,YAAY,SAAS,cAAc,CAAC;IAE1C,IAAI,UAAU,KAAK,CAAC,MAAM,GAAG,GAC3B,SAAS,MAAM,CAAC,SAAS,UAAU,KAAK,CAAC,EAAE;IAG7C,MAAM,CAAA,GAAA,yCAAa,EAAE,UAAU;AACjC;AAEF,IAAI,wCACF,uCAAiB,gBAAgB,CAAC,UAAU,CAAC;IAC3C,EAAE,cAAc;IAEhB,MAAM,kBAAkB,SAAS,cAAc,CAAC,oBAAoB,KAAK;IACzE,MAAM,cAAc,SAAS,cAAc,CAAC,YAAY,KAAK;IAC7D,MAAM,kBAAkB,SAAS,cAAc,CAAC,oBAAoB,KAAK;IAEzE,CAAA,GAAA,yCAAa,EACX;yBAAE;qBAAiB;yBAAa;IAAgB,GAChD;AAEJ;AAEF,IAAI,iCAAW,gCAAU,gBAAgB,CAAC,SAAS,CAAA,GAAA,yCAAK","sources":["public/js/index.js","public/js/login.js","public/js/updateSettings.js"],"sourcesContent":["/* eslint-disable */\n\nimport { login, logout } from './login';\nimport axios from 'axios';\n\nimport { updateSettings } from './updateSettings';\n\nconst form = document.querySelector('.form--login');\nconst formUpdateSettings = document.querySelector('.form-user-data');\nconst formUserPassword = document.querySelector('.form-user-password');\nconst logoutBtn = document.querySelector('.nav__el.nav__el--logout');\n\nif (form) {\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n\nif (formUpdateSettings)\n  formUpdateSettings.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const formData = new FormData();\n    formData.append('name', document.getElementById('name').value);\n    formData.append('email', document.getElementById('email').value);\n    const filePhoto = document.getElementById('photo');\n\n    if (filePhoto.files.length > 0) {\n      formData.append('photo', filePhoto.files[0]);\n    }\n\n    await updateSettings(formData, 'data');\n  });\n\nif (formUserPassword)\n  formUserPassword.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const currentPassword = document.getElementById('password-current').value;\n    const newPassword = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n\n    updateSettings(\n      { currentPassword, newPassword, passwordConfirm },\n      'password',\n    );\n  });\n\nif (logoutBtn) logoutBtn.addEventListener('click', logout);\n","/* eslint-disable */\nimport axios from 'axios';\n\nexport async function login(email, password) {\n  console.log(email, password);\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/users/login',\n      data: {\n        email,\n        password,\n      },\n    });\n    if (res.data.status === 'success') {\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    alert(err.response.data.message);\n  }\n}\n\nexport async function logout() {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: '/api/v1/users/logout',\n    });\n\n    if (res.data.status === 'success') {\n      location.reload(true);\n    }\n  } catch (err) {\n    alert(err.response.data.message);\n  }\n}\n","import axios from 'axios';\n\nexport async function updateSettings(data, type) {\n  const url =\n    type === 'data'\n      ? '/api/v1/users/updateMe'\n      : '/api/v1/users/updateMyPassword';\n\n  try {\n    const res = await axios({\n      url,\n      method: 'PATCH',\n      data: data,\n      transformRequest: (data, headers) => data,\n    });\n\n    if (res.data.status === 'success') {\n      // location.reload(true);\n      console.log(res);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":[],"version":3,"file":"index.js.map"}